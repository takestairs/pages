<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Document</title>

    <script src="https://v2.cn.vuejs.org/js/vue.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

</head>
<body>
    <h1>Pages</h1><br>
    <p>一些纯html静态页面</p>
    <ol>
        <li><a href="./html/MOOC.html">安全与急救</a>dddd</li>
        <li><a href="./html/直线与圆锥曲线.html">数学三：直线与圆锥曲线</a></li>
    </ol>
    <h!>Apps</h>
    <p>一些简单的网页应用，自己写的或者部署的</p>
    <ol>
        <li><a href="./html/Vue.html">Yes or No</a>使用vue+Ajax实现的简单的网页应用，向yesno.wtf/api发起Ajax请求并解析，使用Vue进行响应展示</li>
        <!-- <li><a href="https://chatgpt.274452.xyz">GPT网页端。</a>访问密码：2744521870，6月1号可能就关了</li> -->
        <!-- <li><a href="https://alist.274452.xyz">个人用，放出部分资源，需要自取</a></li> -->
    </ol>
    <hr>
    <div id="app">
        <span>{{content}}</span>
        <br>
        <div style="text-align: right;">{{author}}</div>
    </div>
    <button id="btn">换一句</button>&nbsp;&nbsp;&nbsp;<button id="chg">换种语言</button>
</body>
<script>
    function getEnglish(){
        let res = {content:"",author:""};
        $.ajax({
            type:"GET"
            ,url: "https://api.quotable.io/random"
            ,data : "_="+ new Date().getTime()
            ,async : false
            ,success : function(json){
                res.content = json.content;
                res.author = "——"+json.author;
            }
        })
        return res;
    }
    function getChinese(){
        let res = {content:"",author:""};
        $.ajax({
            type:"GET"
            ,url: "https://v1.hitokoto.cn"
            ,data : "_="+ new Date().getTime()
            ,async : false
            ,success : function(json){
                res.content = json.hitokoto;
                res.author = json.from+" by "+(json.from_who==null? "佚名":json.from_who);
            }
        })
        return res;
    }
    function getError(){
        return {
            content:"出错了"
            ,author:"稍后再试吧"
        }
    }

    const vm = new Vue({
        el : '#app',
        data : {
            content : ""
            ,author: ""
            ,lang : "zh"
            ,supported_lang : ["zh","en"]
        },
        methods: {
            getCont(){
                let lang = this.lang;
                if(lang == "zh") {
                    this.explain(getChinese());
                } else if(lang = "en"){
                    this.explain(getEnglish());
                } else {
                    this.explain(getError());
                }
            }
            ,explain(response){
                this.content = response.content;
                this.author = response.author;
            }
        }
    })
    vm.getCont();
    $(function(){
        $("#btn").click(function(){
            vm.getCont();
        })

        $("#chg").click(function(){
            let langlist = vm.supported_lang;
            while(true){
                let index = Number.parseInt(Math.random()*langlist.length);
                if(langlist[index] != vm.lang) {
                    vm.lang = langlist[index];
                    vm.getCont()
                    break;
                }
            }
        })
    })
</script>
</html>