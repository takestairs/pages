<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Yes Or No</title>
</head>
<body>
    <script src="https://v2.cn.vuejs.org/js/vue.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        function checkQuestion(question){
            // question = "aaa"
            let c = question.charAt(question.length-1);
            if(question.length < 2){
                return "问题太短";
            } else if (c == '?' || c == "？") {
                return "正在思考";
            } else {
                return "请以?结尾哦";
            }
        }
        function query(){
            let api = {}
            $.ajax({
                type : "GET"
                ,url : "https://yesno.wtf/api"
                ,data : "_="+ new Date().getTime()
                ,async : false
                ,success : function(json){
                    // console.log(json);
                    // debugger
                    api = json
                }
            })
            return api;
        }
    </script>

    <h2>问一个问题，以“?”结尾</h2>
    <div id="app">
        <input type="text" v-model="question" placeholder="你想问什么？" @focus="clear" @keydown.enter="check">
        <h4>{{comfirm}}</h4>
        <br>
        <img :src="gif">
    </div>

    <script>
        const vm = new Vue({
            el : "#app",
            data : {
                question : ""
                ,comfirm : ""
                ,gif : ""
            },
            methods: {
                check(){
                    this.comfirm = checkQuestion(this.question);
                }
                ,clear(){
                    this.comfirm = "";
                    this.gif = ""
                }
            },
            watch: {
                comfirm : function(newC, oldC){
                    // this.comfirm == newC
                    if(newC == "正在思考") {
                        let ans = query()
                        this.comfirm = ans.answer;
                        this.gif = ans.image;
                        // ans = {
                        //     "answer": "no",
                        //     "forced": false,
                        //     "image": "https://yesno.wtf/assets/no/30-d37eee83c3c2180de4edb7da6fa9f5b7.gif"
                        // }
                    }
                }
            }
        })
    </script>
</body>
</html>